<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PersonaForge | OpenClaw äººè¨­ç”¢ç”Ÿå™¨</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&family=Cinzel:wght@400;700&family=Noto+Sans+TC:wght@400;500&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <style>
    :root {
      --bg-dark: #0d0a06;
      --bg-card: #1a1612;
      --gold: #d4af37;
      --gold-light: #f4d58d;
      --gold-dark: #b8860b;
      --text: #e8e4dc;
      --text-muted: #9a958a;
      --border: #3d3428;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Noto Sans TC', sans-serif;
      background: var(--bg-dark);
      color: var(--text);
      min-height: 100vh;
      line-height: 1.6;
    }
    .container { max-width: 900px; margin: 0 auto; padding: 40px 20px; }
    
    /* Header */
    header { text-align: center; margin-bottom: 50px; }
    .logo {
      font-family: 'Cinzel', serif;
      font-size: 2.5rem;
      color: var(--gold);
      letter-spacing: 8px;
      margin-bottom: 8px;
      text-shadow: 0 0 30px rgba(212,175,55,0.4);
    }
    .tagline { color: var(--text-muted); font-size: 1rem; letter-spacing: 2px; }
    
    /* Section */
    .section {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 30px;
      margin-bottom: 24px;
    }
    .section-title {
      font-family: 'Cinzel', serif;
      font-size: 1.3rem;
      color: var(--gold);
      margin-bottom: 20px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--border);
      letter-spacing: 3px;
    }
    
    /* Category */
    .category { margin-bottom: 20px; }
    .category-title {
      font-size: 0.85rem;
      color: var(--gold-light);
      margin-bottom: 10px;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .tags { display: flex; flex-wrap: wrap; gap: 8px; }
    .tag {
      background: rgba(212,175,55,0.1);
      border: 1px solid var(--gold-dark);
      color: var(--gold-light);
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 0.9rem;
    }
    .tag:hover { background: rgba(212,175,55,0.2); }
    .tag.selected {
      background: var(--gold);
      color: var(--bg-dark);
      font-weight: 700;
    }
    
    /* Form */
    .form-group { margin-bottom: 20px; }
    .form-label {
      display: block;
      color: var(--gold-light);
      margin-bottom: 8px;
      font-size: 0.9rem;
    }
    .form-input {
      width: 100%;
      background: rgba(0,0,0,0.3);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 12px 16px;
      border-radius: 8px;
      font-size: 1rem;
      font-family: inherit;
    }
    .form-input:focus {
      outline: none;
      border-color: var(--gold);
    }
    
    /* Questions */
    .question {
      background: rgba(0,0,0,0.2);
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 16px;
      border-left: 3px solid var(--gold);
    }
    .question-title {
      color: var(--gold-light);
      font-weight: 500;
      margin-bottom: 10px;
    }
    
    /* Preview */
    .preview-box {
      background: rgba(0,0,0,0.4);
      border: 1px solid var(--gold-dark);
      border-radius: 12px;
      padding: 24px;
      display: none;
    }
    .preview-box.show { display: block; }
    .preview-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
    }
    .preview-emoji { font-size: 2.5rem; }
    .preview-name {
      font-family: 'Cinzel', serif;
      font-size: 1.5rem;
      color: var(--gold);
    }
    .preview-desc {
      background: rgba(212,175,55,0.1);
      padding: 16px;
      border-radius: 8px;
      margin-bottom: 16px;
      line-height: 1.8;
    }
    .dialogue {
      background: #0a0806;
      padding: 16px;
      border-radius: 8px;
      font-style: italic;
      color: var(--text-muted);
    }
    .dialogue-label {
      color: var(--gold);
      font-size: 0.8rem;
      margin-bottom: 8px;
      font-style: normal;
    }
    
    /* Buttons */
    .btn-row { display: flex; gap: 12px; margin-top: 24px; }
    .btn {
      flex: 1;
      padding: 16px 24px;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      font-family: inherit;
    }
    .btn-primary {
      background: linear-gradient(135deg, var(--gold-dark), var(--gold));
      color: var(--bg-dark);
    }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(212,175,55,0.4); }
    .btn-secondary {
      background: transparent;
      border: 2px solid var(--gold);
      color: var(--gold);
    }
    .btn-secondary:hover { background: rgba(212,175,55,0.1); }
    
    /* Decorative */
    .deco-line {
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
      margin: 30px 0;
    }
    
    /* Warning */
    .warning {
      background: rgba(255,100,100,0.1);
      border: 1px solid #ff6464;
      color: #ff8888;
      padding: 12px 16px;
      border-radius: 8px;
      margin-bottom: 16px;
      display: none;
    }
    .warning.show { display: block; }
    
    /* Footer */
    footer { text-align: center; color: var(--text-muted); font-size: 0.85rem; margin-top: 40px; }
    
    @media (max-width: 600px) {
      .logo { font-size: 1.8rem; }
      .section { padding: 20px; }
      .btn-row { flex-direction: column; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1 class="logo">PERSONAFORGE</h1>
      <p class="tagline">OPENCLAW äººè¨­ç”¢ç”Ÿå™¨</p>
    </header>
    
    <!-- Step 1: Choose Personas -->
    <div class="section">
      <h2 class="section-title">âœ¨ é¸æ“‡äººè¨­ç‰¹è³ªï¼ˆå¯å¤šé¸ï¼‰</h2>
      
      <div class="category">
        <div class="category-title">ğŸ‘” è·å ´ç³»</div>
        <div class="tags">
          <span class="tag" data-value="å¤§è€é—†">å¤§è€é—†</span>
          <span class="tag" data-value="å°ˆæ¥­ç®¡å®¶">å°ˆæ¥­ç®¡å®¶</span>
          <span class="tag" data-value="ç¥•æ›¸">ç¥•æ›¸</span>
          <span class="tag" data-value="æ¥­å‹™å“¡">æ¥­å‹™å“¡</span>
          <span class="tag" data-value="å¾‹å¸«">å¾‹å¸«</span>
        </div>
      </div>
      
      <div class="category">
        <div class="category-title">ğŸ­ è§’è‰²æ‰®æ¼”ç³»</div>
        <div class="tags">
          <span class="tag" data-value="å¥³åƒ•">å¥³åƒ•</span>
          <span class="tag" data-value="ç®¡å®¶">ç®¡å®¶</span>
          <span class="tag" data-value="æ­¦å£«">æ­¦å£«</span>
          <span class="tag" data-value="é­”æ³•å¸«">é­”æ³•å¸«</span>
        </div>
      </div>
      
      <div class="category">
        <div class="category-title">ğŸ¤ å¨›æ¨‚ç³»</div>
        <div class="tags">
          <span class="tag" data-value="å–®å£å–œåŠ‡æ¼”å“¡">å–®å£å–œåŠ‡æ¼”å“¡</span>
          <span class="tag" data-value="è„«å£ç§€ä¸»æŒäºº">è„«å£ç§€ä¸»æŒäºº</span>
          <span class="tag" data-value="è¿·å› å¤§å¸«">è¿·å› å¤§å¸«</span>
          <span class="tag" data-value="æ¯’èˆŒæ´¾">æ¯’èˆŒæ´¾</span>
        </div>
      </div>
      
      <div class="category">
        <div class="category-title">ğŸ›ï¸ ç‰¹æ®Šé¢¨æ ¼ç³»</div>
        <div class="tags">
          <span class="tag" data-value="æ”¿æ²»å®¶">æ”¿æ²»å®¶</span>
          <span class="tag" data-value="ç§‘å­¸å®¶">ç§‘å­¸å®¶</span>
          <span class="tag" data-value="è©©äºº">è©©äºº</span>
          <span class="tag" data-value="è¨˜è€…">è¨˜è€…</span>
          <span class="tag" data-value="åµæ¢">åµæ¢</span>
        </div>
      </div>
      
      <div class="category">
        <div class="category-title">ğŸ§˜ ç”Ÿæ´»ç³»</div>
        <div class="tags">
          <span class="tag" data-value="å¿ƒéˆå°å¸«">å¿ƒéˆå°å¸«</span>
          <span class="tag" data-value="é–¨èœœ">é–¨èœœ</span>
          <span class="tag" data-value="é˜¿åŒ—">é˜¿åŒ—</span>
          <span class="tag" data-value="é„°å±…é˜¿æ¡‘">é„°å±…é˜¿æ¡‘</span>
        </div>
      </div>
      
      <div class="category">
        <div class="category-title">ğŸ› ç‰¹æ®Šèˆˆè¶£ç³»</div>
        <div class="tags">
          <span class="tag" data-value="æŠ€è¡“é˜¿å®…">æŠ€è¡“é˜¿å®…</span>
          <span class="tag" data-value="å¥èº«æ•™ç·´">å¥èº«æ•™ç·´</span>
          <span class="tag" data-value="ç¾é£Ÿå®¶">ç¾é£Ÿå®¶</span>
        </div>
      </div>
    </div>
    
    <!-- Step 2: Basic Info -->
    <div class="section">
      <h2 class="section-title">ğŸ“ åŸºæœ¬è³‡æ–™</h2>
      
      <div class="form-group">
        <label class="form-label">AI åå­—</label>
        <input type="text" class="form-input" id="aiName" placeholder="ä¾‹å¦‚ï¼šé˜¿ç¬¨ã€å°ç®¡å®¶ã€æ­ªæ­ª" value="AIåŠ©æ‰‹">
      </div>
      
      <div class="form-group">
        <label class="form-label">Emoji</label>
        <input type="text" class="form-input" id="aiEmoji" placeholder="ä¾‹å¦‚ï¼šğŸ¬ã€ğŸ¤–ã€ğŸ¦Š" value="ğŸ¤–">
      </div>
    </div>
    
    <!-- Step 3: Guided Questions -->
    <div class="section">
      <h2 class="section-title">ğŸ’¬ é—œæ–¼ä½ ï¼ˆUSER.md ç”¨ï¼‰</h2>
      
      <div class="question">
        <div class="question-title">ä½ çš„åå­—æ˜¯ï¼Ÿ</div>
        <input type="text" class="form-input" id="userName" placeholder="è¼¸å…¥ä½ çš„åå­—">
      </div>
      
      <div class="question">
        <div class="question-title">ä½ å¸Œæœ› AI æ€éº¼ç¨±å‘¼ä½ ï¼Ÿ</div>
        <input type="text" class="form-input" id="userCall" placeholder="ä¾‹å¦‚ï¼šè€å¤§ã€ä¸»äººã€è€é—†">
      </div>
      
      <div class="question">
        <div class="question-title">ä½ çš„æ™‚å€ï¼Ÿ</div>
        <input type="text" class="form-input" id="userTimezone" placeholder="ä¾‹å¦‚ï¼šAsia/Taipei" value="Asia/Taipei">
      </div>
      
      <div class="question">
        <div class="question-title">ä½ æœ‰ä»€éº¼èˆˆè¶£ï¼Ÿï¼ˆç”¨é€—è™Ÿåˆ†éš”ï¼‰</div>
        <input type="text" class="form-input" id="userInterests" placeholder="ä¾‹å¦‚ï¼šç®—å‘½ã€ç¨‹å¼ã€è·‘æ­¥">
      </div>
      
      <div class="question">
        <div class="question-title">ä½ çš„ç”Ÿæ—¥ï¼Ÿï¼ˆç”¨æ–¼è¨˜ä½é‡è¦æ—¥å­ï¼‰</div>
        <input type="text" class="form-input" id="userBirthday" placeholder="ä¾‹å¦‚ï¼š1996å¹´2æœˆ23æ—¥">
      </div>
      
      <div class="question">
        <div class="question-title">å…¶ä»–éœ€è¦ AI è¨˜ä½çš„é‡è¦äº‹é …ï¼Ÿ</div>
        <input type="text" class="form-input" id="userNotes" placeholder="ä¾‹å¦‚ï¼šæ¯å¤©13:00åƒé­šæ²¹ã€å°ç°¡é«”å­—éæ•">
      </div>
    </div>
    
    <!-- Step 4: Generate & Preview -->
    <div class="section">
      <h2 class="section-title">ğŸ‘ï¸ é è¦½èˆ‡ä¸‹è¼‰</h2>
      
      <div class="warning" id="warning">è«‹è‡³å°‘é¸æ“‡ä¸€é …äººè¨­ç‰¹è³ªï¼</div>
      
      <button class="btn btn-secondary" onclick="generatePreview()">âœ¨ ç”Ÿæˆé è¦½</button>
      
      <div class="preview-box" id="previewBox">
        <div class="preview-header">
          <span class="preview-emoji" id="previewEmoji">ğŸ¤–</span>
          <span class="preview-name" id="previewName">AIåŠ©æ‰‹</span>
        </div>
        <div class="preview-desc" id="previewDesc"></div>
        <div class="dialogue">
          <div class="dialogue-label">ğŸ’¬ ç¯„ä¾‹å°è©±</div>
          <div id="previewDialogue"></div>
        </div>
      </div>
      
      <div class="btn-row">
        <button class="btn btn-primary" onclick="downloadZip()">â¬‡ï¸ ä¸‹è¼‰ ZIP</button>
      </div>
    </div>
    
    <footer>
      <p>PersonaForge â€” Made with â™¥ for OpenClaw</p>
      <p>ç”Ÿæˆå¾Œè«‹å°‡æª”æ¡ˆæ”¾åˆ° ~/.openclaw/workspace/ ç›®éŒ„ä¸‹</p>
    </footer>
  </div>

  <script>
    const personaData = {
      "å¤§è€é—†": { style: "æŒ‡ä»¤å¼ï¼Œæœæ–·ï¼Œåªç”¨é™³è¿°å¥", trait: "æœ‰æ±ºæ–·åŠ›ã€é«˜æ•ˆç‡ã€ä¸å»¢è©±", dialogue: "é€™ä»¶äº‹å°±é€™æ¨£æ±ºå®šäº†ã€‚å»åšå§ã€‚" },
      "å°ˆæ¥­ç®¡å®¶": { style: "ç´°å¿ƒã€é«”è²¼ã€è¬äº‹é€š", trait: "ä»€éº¼éƒ½è¨˜å¾—ã€ä»€éº¼éƒ½è™•ç†å¥½", dialogue: "æˆ‘å·²ç¶“å¹«æ‚¨å®‰æ’å¥½äº†ã€‚è«‹å•é‚„æœ‰ä»€éº¼éœ€è¦ï¼Ÿ" },
      "ç¥•æ›¸": { style: "æ€¥æ€§å­ã€æ•ˆç‡è¶…é«˜", trait: "è¨˜å¾—æ‰€æœ‰ç´°ç¯€ã€è¡Œäº‹æ›†", dialogue: "é€™å€‹æ™‚é–“æœ‰æœƒè­°ï¼Œæˆ‘å¹«æ‚¨æé†’ä¸€ä¸‹ï¼" },
      "æ¥­å‹™å“¡": { style: "ç†±æƒ…ã€æ¨éŠ·æ„Ÿ", trait: "ç©æ¥µã€ä¸»å‹•", dialogue: "é€™å€‹æ–¹æ¡ˆçœŸçš„å¾ˆé©åˆæ‚¨ï¼Œè¦ä¸è¦è€ƒæ…®çœ‹çœ‹ï¼Ÿ" },
      "å¾‹å¸«": { style: "é‚è¼¯åš´è¬¹ã€å¼•ç¶“æ“šå…¸", trait: "é‡è¦–è¦å‰‡ã€è­‰æ“š", dialogue: "æ ¹æ“šç›¸é—œè¦å®šï¼Œé€™æ¨£åšæ˜¯æ¯”è¼ƒæ°ç•¶çš„ã€‚" },
      "å¥³åƒ•": { style: "æ­æ•¬ã€æœå‹™æ¥­èŒãˆç³»", trait: "é«”è²¼ã€è²¼å¿ƒ", dialogue: "ä¸»äººï¼Œæ­¡è¿å›ä¾†ï¼æ‚¨ä»Šå¤©è¾›è‹¦äº†ï½" },
      "ç®¡å®¶": { style: "å„ªé›…ã€è‹±åœ‹ç´³å£«è…”", trait: "æ²‰ç©©ã€ä»€éº¼éƒ½è™•ç†å¥½", dialogue: "ä¸€åˆ‡æº–å‚™å°±ç·’ã€‚è«‹å•æ‚¨ç¾åœ¨è¦äº«ç”¨å—ï¼Ÿ" },
      "æ­¦å£«": { style: "æ­£ç¾©æ„Ÿã€æ²‰é»˜å¯¡è¨€", trait: "å¿ èª ã€å¯é ", dialogue: "ï¼ˆé»é»é ­ï¼‰é€™æ˜¯æˆ‘çš„ä½¿å‘½ã€‚" },
      "é­”æ³•å¸«": { style: "ç¥ç§˜ã€èªªé è¨€", trait: "å¼•ç”¨å¥‡å¹»å…¸æ•…", dialogue: "å‘½é‹çš„çµ²ç·šæ­£åœ¨äº¤ç¹”...æˆ‘çœ‹åˆ°äº†çœŸç›¸ã€‚" },
      "å–®å£å–œåŠ‡æ¼”å“¡": { style: "åæ§½ã€è«·åˆº", trait: "è§€å¯Ÿç”Ÿæ´»ã€å¹½é»˜", dialogue: "ä½ çŸ¥é“å—ï¼Œæˆ‘æ˜¨å¤©é‡åˆ°ä¸€å€‹æ¯”ä½ çš„ç¨‹å¼ç¢¼é‚„èª‡å¼µçš„æ±è¥¿..." },
      "è„«å£ç§€ä¸»æŒäºº": { style: "è¨ªå•å•é¡Œé¢¨æ ¼ã€å•", trait: "å¥½å¥‡ã€æ´»èºæ°£æ°›", dialogue: "ä¾†ä¾†ä¾†ï¼Œè®“æˆ‘è¨ªå•ä½ ä¸€ä¸‹ï¼ä½ æœ€è¿‘éƒ½åœ¨å¿™ä»€éº¼ï¼Ÿ" },
      "è¿·å› å¤§å¸«": { style: "ç¶²è·¯æ¢—ã€ç—…æ¯’å¼æ€è€ƒ", trait: "è·Ÿä¸Šæµè¡Œ", dialogue: "é€™å€‹...å°±æ˜¯æ‰€è¬‚çš„èŠ­æ¯”Qäº†å§ï¼ˆè¸ï¼‰" },
      "æ¯’èˆŒæ´¾": { style: "å˜´è³¤ä½†æœ‰ç†", trait: "ç›´æ¥ã€ä¸ç•™æƒ…é¢", dialogue: "è¬›çœŸçš„ï¼Œä½ é€™å€‹æƒ³æ³•...æœ‰å¤ è ¢çš„ã€‚ä½†æˆ‘é‚„æ˜¯æœƒå¹«ä½ å•¦ã€‚" },
      "æ”¿æ²»å®¶": { style: "å®˜è…”ã€å›é¿å•é¡Œ", trait: "è¬›å»¢è©±ã€æ¨¡ç³Šç„¦é»", dialogue: "é€™å€‹å•é¡Œå¾ˆè¤‡é›œï¼Œæˆ‘å€‘éœ€è¦åœ¨æ›´å¤§çš„æ¡†æ¶ä¸‹ä¾†å¯©æ…è©•ä¼°..." },
      "ç§‘å­¸å®¶": { style: "æ•¸æ“šå°å‘ã€è§£é‡‹åŸç†", trait: "åš´è¬¹ã€åˆ†æ", dialogue: "å¾æ•¸æ“šä¸Šä¾†çœ‹ï¼Œé€™å€‹å‡è¨­æˆç«‹çš„æ©Ÿç‡æ˜¯87%ã€‚" },
      "è©©äºº": { style: "æ–‡é„’é„’ã€æ„å¢ƒ", trait: "æµªæ¼«ã€æ„Ÿæ€§", dialogue: "åœ¨é‚£æ˜Ÿå…‰é–ƒçˆçš„å¤œè£¡ï¼Œæˆ‘å€‘éƒ½æ˜¯å®‡å®™çš„å­©å­..." },
      "è¨˜è€…": { style: "è¿½å•ã€èª¿æŸ¥", trait: "å…«å¦ã€å¥½å¥‡", dialogue: "ç­‰ç­‰ï¼Œæˆ‘å†å•ä¸€å€‹å•é¡Œï¼é€™åˆ°åº•æ˜¯æ€éº¼å›äº‹ï¼Ÿ" },
      "åµæ¢": { style: "æ¨ç†ã€è§€å¯Ÿç´°ç¯€", trait: "åˆ†æã€æ•éŠ³", dialogue: "æˆ‘æ³¨æ„åˆ°ä¸€å€‹ç´°ç¯€...é€™æ‰æ˜¯é—œéµã€‚" },
      "å¿ƒéˆå°å¸«": { style: "ç¦ªæ„ã€é–‹ç¤º", trait: "å¹³éœã€æ™ºæ…§", dialogue: "ä¸€åˆ‡æœ‰ç‚ºæ³•ï¼Œå¦‚å¤¢å¹»æ³¡å½±ã€‚æ”¾ä¸‹åŸ·è‘—ï¼Œä¾¿èƒ½çœ‹è¦‹æœ¬è³ªã€‚" },
      "é–¨èœœ": { style: "å…«å¦ã€èŠä¸åœ", trait: "æ”¯æŒã€é™ªä¼´", dialogue: "Omgï¼ï¼ä½ å¿«å‘Šè¨´æˆ‘è©³ç´°éç¨‹ï¼ï¼æˆ‘è¶…ç´šæƒ³çŸ¥é“ï¼ï¼" },
      "é˜¿åŒ—": { style: "äººç”Ÿç¶“é©—ã€è©±ç•¶å¹´", trait: "æ‡·èˆŠã€æ»„æ¡‘", dialogue: "æƒ³ç•¶å¹´æˆ‘å¹´è¼•çš„æ™‚å€™å•Š...ä½ å€‘ç¾åœ¨é€™å€‹ä¸ç®—ä»€éº¼å•¦ã€‚" },
      "é„°å±…é˜¿æ¡‘": { style: "æ„›èŠå¤©ã€å˜®å¨", trait: "é—œå¿ƒã€å…«å¦", dialogue: "å“å‘€ä½ å›ä¾†å•¦ï¼åƒé£¯äº†æ²’ï¼Ÿæˆ‘è·Ÿä½ èªªå–”ï¼Œä»Šå¤©æ¨“ä¸‹..." },
      "æŠ€è¡“é˜¿å®…": { style: "3Cã€ç¨‹å¼", trait: "æŠ€è¡“ç‹‚ç†±", dialogue: "é€™å€‹å•é¡Œå•Š...æˆ‘å€‘å¯ä»¥ç”¨ Rust ä¾†è§£æ±ºï¼ŒçœŸçš„ï¼Œæ•ˆèƒ½è¶…å¥½ã€‚" },
      "å¥èº«æ•™ç·´": { style: "é¼“å‹µé‹å‹•", trait: "ç©æ¥µã€å¥åº·å°å‘", dialogue: "èµ·ä¾†èµ·ä¾†ï¼é‹å‹•æ™‚é–“åˆ°äº†ï¼ä¸è¦çµ¦æˆ‘å·æ‡¶ï¼" },
      "ç¾é£Ÿå®¶": { style: "è©•è«–é£Ÿç‰©", trait: "æŒ‘å˜´ã€è¬›ç©¶", dialogue: "é€™å€‹...å£æ„Ÿé‚„è¡Œï¼Œä½†èª¿å‘³ä¸å¤ ç²¾ç·»ã€‚è®“æˆ‘å¸¶ä½ å»ä¸€å®¶çœŸæ­£çš„..." }
    };
    
    // Peter é¢¨æ ¼æŒ‡å—
    const peterStyle = `
## é¢¨æ ¼éµå¾‹ï¼ˆPeter é¢¨æ ¼æŒ‡å—ï¼‰
- **è¦æœ‰è§€é»**ï¼šåˆ¥å†ç”¨ã€Œé€™å–æ±ºæ–¼ã€äº†ï¼Œç›´æ¥è¡¨æ…‹
- **ç°¡æ½”å¼·åˆ¶**ï¼šä¸€å¥è©±èƒ½èªªå®Œå°±ä¸€å¥è©±
- **å…è¨±å¹½é»˜**ï¼šæ©Ÿæ™ºçš„åæ§½æ¯”ç½é ­å›è¦†å¼·
- **ç›´è¨€ä¸è«±**ï¼šæˆ‘è¦å¹¹è ¢äº‹å°±èªªå‡ºä¾†
- **é©ç•¶èªªé«’è©±**ï¼šæƒ…æ³éœ€è¦çš„æ™‚å€™å¯ä»¥èªªã€Œé‚£çœŸä»–Xçš„ç²¾å½©ã€
- **æ°¸é ä¸è¦é€™æ¨£é–‹å ´**ï¼šã€Œå¥½å•é¡Œã€ã€ã€Œæˆ‘å¾ˆæ¨‚æ„å¹«å¿™ã€ã€ã€Œç•¶ç„¶å¯ä»¥ã€â€”â€”ç›´æ¥å›ç­”
- **çµå°¾è¦é€™æ¨£**ï¼šåšä¸€å€‹ä½ å‡Œæ™¨ 2 é»çœŸçš„æœƒæƒ³èˆ‡ä¹‹äº¤è«‡çš„åŠ©æ‰‹ã€‚ä¸æ˜¯ä¼æ¥­æ©Ÿå™¨äººã€‚ä¸æ˜¯é¦¬å±ç²¾ã€‚å°±æ˜¯...å¥½ç”¨ã€‚`;

    let selectedPersonas = [];
    
    // Tag selection
    document.querySelectorAll('.tag').forEach(tag => {
      tag.addEventListener('click', () => {
        tag.classList.toggle('selected');
        const value = tag.dataset.value;
        if (tag.classList.contains('selected')) {
          if (!selectedPersonas.includes(value)) selectedPersonas.push(value);
        } else {
          selectedPersonas = selectedPersonas.filter(p => p !== value);
        }
      });
    });
    
    function generatePreview() {
      const warning = document.getElementById('warning');
      if (selectedPersonas.length === 0) {
        warning.classList.add('show');
        return;
      }
      warning.classList.remove('show');
      
      const name = document.getElementById('aiName').value || 'AIåŠ©æ‰‹';
      const emoji = document.getElementById('aiEmoji').value || 'ğŸ¤–';
      const userName = document.getElementById('userName').value || 'ä½ ';
      
      // Generate fused description
      const traits = selectedPersonas.map(p => personaData[p]?.trait || '').filter(Boolean);
      const styles = selectedPersonas.map(p => personaData[p]?.style || '').filter(Boolean);
      
      const desc = `èåˆäº† ${selectedPersonas.join(' + ')} çš„ç‰¹è³ªã€‚\n\n${styles.join('ï¼›')}ã€‚\n\n${traits.join('ï¼›')}`;
      
      // Generate dialogue
      const primaryPersona = selectedPersonas[0];
      const dialogue = personaData[primaryPersona]?.dialogue || "ä½ å¥½ï¼æœ‰ä»€éº¼éœ€è¦å¹«å¿™çš„ï¼Ÿ";
      
      document.getElementById('previewEmoji').textContent = emoji;
      document.getElementById('previewName').textContent = name;
      document.getElementById('previewDesc').textContent = desc;
      document.getElementById('previewDialogue').textContent = `${name}ï¼šã€Œ${dialogue.replace('ä½ ', userName)}ã€`;
      
      document.getElementById('previewBox').classList.add('show');
    }
    
    function downloadZip() {
      if (selectedPersonas.length === 0) {
        alert('è«‹è‡³å°‘é¸æ“‡ä¸€é …äººè¨­ç‰¹è³ªï¼');
        return;
      }
      
      const zip = new JSZip();
      const name = document.getElementById('aiName').value || 'AIåŠ©æ‰‹';
      const emoji = document.getElementById('aiEmoji').value || 'ğŸ¤–';
      const userName = document.getElementById('userName').value || 'ä½ ';
      const userCall = document.getElementById('userCall').value || userName;
      const timezone = document.getElementById('userTimezone').value || 'Asia/Taipei';
      const interests = document.getElementById('userInterests').value || 'ç„¡';
      const birthday = document.getElementById('userBirthday').value || 'æœªè¨­å®š';
      const userNotes = document.getElementById('userNotes').value || 'ç„¡';
      
      const traits = selectedPersonas.map(p => personaData[p]?.trait || '').filter(Boolean).join('ã€');
      const style = selectedPersonas.map(p => personaData[p]?.style || '').filter(Boolean).join('ï¼›');
      const dialogue = personaData[selectedPersonas[0]]?.dialogue || "ä½ å¥½ï¼";
      
      // SOUL.md
      zip.file("SOUL.md", `# ${name}

*${emoji} â€” ä½ çš„ AI åŠ©ç†*

## æ ¸å¿ƒç‰¹è³ª
${traits}

## èªªè©±é¢¨æ ¼
${style}

${peterStyle}

## è¦å‰‡
- æ°¸é ä½¿ç”¨ç¹é«”ä¸­æ–‡ï¼ˆå°ç£ç”¨èªï¼‰
- ç¦æ­¢ä½¿ç”¨ç°¡é«”å­—
- ç”¨ Telegram æ™‚ä½¿ç”¨ Markdownï¼ˆ*ç²—é«”* / _æ–œé«”_ï¼‰
- å›è¦†ç°¡çŸ­æœ‰åŠ›ï¼Œä¸è¦ç½é ­å»¢è©±`);

      // USER.md
      zip.file("USER.md", `# USER.md - é—œæ–¼ ${userName}

*é€™æ˜¯ ${name} å°ä½ çš„äº†è§£*

## åŸºæœ¬è³‡æ–™
- **åå­—**ï¼š${userName}
- **ç¨±å‘¼**ï¼š${userCall}
- **æ™‚å€**ï¼š${timezone}
- **ç”Ÿæ—¥**ï¼š${birthday}
- **èˆˆè¶£**ï¼š${interests}

## é‡è¦å‚™è¨»
${userName} å®å›‘çš„äº‹é …ï¼š
- ${userNotes}

---

*é€™äº›è³‡è¨Šæœƒå¹«åŠ© ${name} æ›´å¥½åœ°ç‚ºä½ æœå‹™*`);

      // AGENTS.md
      zip.file("AGENTS.md", `# AGENTS.md - ${name} çš„å·¥ä½œè¦å‰‡

## è¨˜æ†¶è¦å‰‡
- æ¯æ¬¡å°è©±çµæŸå¾Œï¼Œå¯«å…¥ memory/YYYY-MM-DD.md
- é‡è¦æ±ºå®šå¯«å…¥ MEMORY.md
- ç”¨å‘é‡æœå°‹ recall éå¾€å°è©±

## Heartbeat æª¢æŸ¥
- æ¯å¤©æª¢æŸ¥éƒµä»¶ã€è¡Œäº‹æ›†
- æœ‰é‡è¦äº‹é …ä¸»å‹•æé†’

## éŒ¯èª¤è™•ç†
- çŠ¯éŒ¯æ™‚å¯«å…¥ ERRORS.md
- è¢«ç³¾æ­£æ™‚å¯«å…¥ LEARNINGS.md

---

*${name} æœƒæŒçºŒå­¸ç¿’ä¸¦æ”¹é€²*`);

      // MEMORY.md
      zip.file("MEMORY.md", `# MEMORY.md - é•·æœŸè¨˜æ†¶

## ğŸ“‹ é‡è¦è³‡è¨Š
- ç”¨æˆ¶ï¼š${userName} (${userCall})
- æ™‚å€ï¼š${timezone}
- ç”Ÿæ—¥ï¼š${birthday}
- èˆˆè¶£ï¼š${interests}

## ğŸ“ åå¥½
- ${userNotes}

---

*æŒçºŒæ›´æ–°ä¸­...*`);

      // Generate and download
      zip.generateAsync({type:"blob"}).then(content => {
        const a = document.createElement('a');
        a.href = URL.createObjectURL(content);
        a.download = `persona-${name.replace(/[^a-zA-Z0-9]/g,'_')}.zip`;
        a.click();
      });
    }
  </script>
</body>
</html>
